<<<<<<< HEAD
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/distribution/distribution"],{73:function(t,e,i){"use strict";(function(t){i(5);n(i(4));var e=n(i(74));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i(1)["createPage"])},74:function(t,e,i){"use strict";i.r(e);var n=i(75),s=i(77);for(var a in s)"default"!==a&&function(t){i.d(e,t,(function(){return s[t]}))}(a);i(79);var r,o=i(11),d=Object(o["default"])(s["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],r);d.options.__file="pages/distribution/distribution.vue",e["default"]=d.exports},75:function(t,e,i){"use strict";i.r(e);var n=i(76);i.d(e,"render",(function(){return n["render"]})),i.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]})),i.d(e,"recyclableRender",(function(){return n["recyclableRender"]})),i.d(e,"components",(function(){return n["components"]}))},76:function(t,e,i){"use strict";var n;i.r(e),i.d(e,"render",(function(){return s})),i.d(e,"staticRenderFns",(function(){return r})),i.d(e,"recyclableRender",(function(){return a})),i.d(e,"components",(function(){return n}));var s=function(){var t=this,e=t.$createElement,i=(t._self._c,t.bodyBj?Number(t.freight):null),n=Number(t.gasPrice),s=!t.bodyBj&&t.check?Number(t.gasPrice):null;t.$mp.data=Object.assign({},{$root:{m0:i,m1:n,m2:s}})},a=!1,r=[];s._withStripped=!0},77:function(t,e,i){"use strict";i.r(e);var n=i(78),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=s.a},78:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(18);function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a=function(){i.e("components/h-time-alert/h-time-alert").then(function(){return resolve(i(325))}.bind(null,i)).catch(i.oe)},r={components:{hTimeAlert:a},onLoad:function(t){this.address_id=getApp().globalData.address_id,this.getUserInfo(),this.date=getApp().globalData.date,this.time=getApp().globalData.time,this.active=t.active?t.active:1,this.getAreaList(),this.bodyBj="true"==t.bodyBj},onShow:function(){this.getDefaultAddress(),this.getOrderConfig()},data:function(){var t;return t={current:0,payindex:0,bodyBj:!1,user_type:1,pull:!1,active:1,date:"",time:"",name:"",address_id:"",telephone:"",address:"",city_id:"",country_id:"",message:"",invoice_phone:"",customer_name:"",voucher_phone:"",voucher_user:"",wa_coin:0,keep_address:0,check:!1,arealist:[],index:0,index1:0,index2:0,itemslist:[]},s(t,"city_id",""),s(t,"country_id",""),s(t,"city",""),s(t,"country",""),s(t,"gas",[]),s(t,"remnant",""),s(t,"freight",""),s(t,"userOrderCount",""),s(t,"num",1),s(t,"pail_num",1),s(t,"paylist",[]),s(t,"paytype",""),s(t,"gasName",""),s(t,"gasPrice",""),t},methods:{radioChange:function(t){this.paytype=t.detail.value},getUserInfo:function(){var e=this,i={};(0,n.getUserInfo)(i).then((function(i){e.wa_coin=i.data.wa_coin,e.remnant=i.data.remnant,1==t.getStorageSync("user_type")?e.remnant>=15&&(e.pull=!0):e.remnant>=20&&(e.pull=!0),e.pail_num=i.data.pail_num}))},add:function(){this.pail_num>this.num&&this.num++},sub:function(){this.num>1&&this.num--},yuqi:function(){1==t.getStorageSync("user_type")?this.remnant>=15?(this.bodyBj=!this.bodyBj,this.check=!1,this.getOrderConfig()):t.showToast({title:"餘氣不足",icon:"none"}):this.remnant>=20?(this.bodyBj=!this.bodyBj,this.check=!1,this.getOrderConfig()):t.showToast({title:"餘氣不足",icon:"none"})},getOrderConfig:function(){var e=this;this.gas=[];var i={};this.user_type=t.getStorageSync("user_type"),(0,n.getOrderConfig)(i).then((function(t){e.bodyBj&&(e.freight=t.data.remnant_freight),e.freight=t.data.freight,e.userOrderCount=t.data.userOrderCount,1==e.user_type?e.gas.push(t.data.gas_one):2==e.user_type&&(e.gas.push(t.data.gas_one),e.gas.push(t.data.gas_two)),e.gasName=e.gas[e.index2].name,e.gasPrice=e.gas[e.index2].price,e.paylist=t.data.gtpay_type}))},getDefaultAddress:function(){var t=this,e={};(0,n.getDefaultAddress)(e).then((function(e){e.data&&(t.address=e.data.address,t.city=e.data.city,t.name=e.data.name,t.telephone=e.data.telephone,t.country=e.data.country,t.address_id=e.data.id)}))},checkbox:function(t){this.keep_address=t.detail.value[0]?t.detail.value[0]:0},changePay:function(t){this.payindex=t.target.value},changeCountry:function(t){console.log(t.target.value),this.country="",this.index1=t.target.value,this.country_id=this.itemslist[t.target.value].id},changeCity:function(t){this.city="",this.index=t.target.value,this.itemslist=this.arealist[this.index].items,this.city_id=this.arealist[this.index].id,this.index1=0,this.country_id=this.itemslist[this.index1].id},changeGas:function(t){this.index2=t.target.value,this.gasName=this.gas[this.index2].name,this.gasPrice=this.gas[this.index2].price},getAreaList:function(){var t=this,e=this,i={};(0,n.areaList)(i).then((function(i){if(t.arealist=i.data,t.itemslist=t.arealist[t.index].items,t.city_id=t.arealist[t.index].id,t.country_id=t.itemslist[t.index1].id,t.address_id){var s={address_id:t.address_id};(0,n.addressAddInfo)(s).then((function(i){t.city_id=i.data.city_id,t.country_id=i.data.country_id,t.arealist.forEach((function(t){t.id==e.city_id&&(e.index=e.arealist.indexOf(t))})),t.itemslist=t.arealist[t.index].items,t.itemslist.forEach((function(t){t.id==e.country_id&&(e.index1=e.itemslist.indexOf(t))})),t.address=i.data.address,t.name=i.data.name,t.telephone=i.data.telephone}))}}))},checkend:function(){1==t.getStorageSync("user_type")?this.wa_coin>=600?(this.check=!this.check,this.getOrderConfig()):t.showToast({title:"瓦幣不足",icon:"none"}):this.wa_coin>=800?(this.check=!this.check,this.getOrderConfig()):t.showToast({title:"瓦幣不足",icon:"none"})},goto:function(e,i){1==i?t.showToast({title:"暫未開發",icon:"none"}):t.redirectTo({url:e})},subOrder:function(){if(!this.name)return t.showToast({title:"請輸入姓名",icon:"none"});if(!this.telephone)return t.showToast({title:"請輸入電話號碼",icon:"none"});if(!this.address)return t.showToast({title:"請輸入收貨地址",icon:"none"});if(!this.data&&2==this.active&&!this.time)return t.showToast({title:"請選擇預約時間",icon:"none"});if(!this.paytype)return t.showToast({title:"請選擇支付方式",icon:"none"});var e=this.city?this.city:this.arealist[this.index].name,i=this.country?this.country:this.itemslist[this.index1].name,n=e+i+this.address,s=this.check?1:0,a=this.bodyBj?1:0,r={gtpay_type:this.paytype,freight:this.freight,gas:this.gas[this.index2],allAddress:n,address_id:this.address_id,order_type:this.active,name:this.name,telephone:this.telephone,address:this.address,message:this.message,invoice_phone:this.invoice_phone,customer_name:this.customer_name,voucher_phone:this.voucher_phone,voucher_user:this.voucher_user,wa_coin:s,remnant:a,city_id:this.city_id,country_id:this.country_id,pre_date:this.date,pre_hour:this.time,token:"8a6166bc9a13b3616c36125a806660ae",keep_address:this.keep_address,pail_num:this.num};t.navigateTo({url:"/pages/distribution/Information?data="+encodeURIComponent(JSON.stringify(r))})},changetab:function(e){if(1==e){if(0==this.userOrderCount)return t.showToast({title:"新用戶首單必須是預約單！",icon:"none"});var i=new Date;if(i.getHours()<=8||i.getHours()>=20)return t.showToast({title:"即時單配送時間為08：00~20：00~若已過營業時間，請改預約明日下單，謝謝",icon:"none"});this.active=e}else this.active=e}}};e.default=r}).call(this,i(1)["default"])},79:function(t,e,i){"use strict";i.r(e);var n=i(80),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=s.a},80:function(t,e,i){}},[[73,"common/runtime","common/vendor"]]]);
=======
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/distribution/distribution"],{73:function(t,e,i){"use strict";(function(t){i(5);n(i(4));var e=n(i(74));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i(1)["createPage"])},74:function(t,e,i){"use strict";i.r(e);var n=i(75),s=i(77);for(var a in s)"default"!==a&&function(t){i.d(e,t,(function(){return s[t]}))}(a);i(79);var r,o=i(11),d=Object(o["default"])(s["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],r);d.options.__file="pages/distribution/distribution.vue",e["default"]=d.exports},75:function(t,e,i){"use strict";i.r(e);var n=i(76);i.d(e,"render",(function(){return n["render"]})),i.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]})),i.d(e,"recyclableRender",(function(){return n["recyclableRender"]})),i.d(e,"components",(function(){return n["components"]}))},76:function(t,e,i){"use strict";var n;i.r(e),i.d(e,"render",(function(){return s})),i.d(e,"staticRenderFns",(function(){return r})),i.d(e,"recyclableRender",(function(){return a})),i.d(e,"components",(function(){return n}));var s=function(){var t=this,e=t.$createElement,i=(t._self._c,t.bodyBj?Number(t.freight):null),n=Number(t.gasPrice),s=!t.bodyBj&&1==t.wa_coin_config&&t.check?Number(t.gasPrice):null;t.$mp.data=Object.assign({},{$root:{m0:i,m1:n,m2:s}})},a=!1,r=[];s._withStripped=!0},77:function(t,e,i){"use strict";i.r(e);var n=i(78),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=s.a},78:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(18);function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a=function(){i.e("components/h-time-alert/h-time-alert").then(function(){return resolve(i(347))}.bind(null,i)).catch(i.oe)},r={components:{hTimeAlert:a},onLoad:function(t){this.address_id=getApp().globalData.address_id,this.getUserInfo(),this.date=getApp().globalData.date,this.time=getApp().globalData.time,this.active=t.active?t.active:1,this.getAreaList(),this.bodyBj="true"==t.bodyBj},onShow:function(){this.getDefaultAddress(),this.getOrderConfig()},data:function(){var t;return t={current:0,payindex:0,bodyBj:!1,user_type:1,pull:!1,active:1,date:"",time:"",name:"",address_id:"",telephone:"",address:"",city_id:"",country_id:"",message:"",invoice_phone:"",customer_name:"",voucher_phone:"",voucher_user:"",wa_coin:0,keep_address:0,check:!1,arealist:[],index:0,index1:0,index2:0,itemslist:[]},s(t,"city_id",""),s(t,"country_id",""),s(t,"city",""),s(t,"country",""),s(t,"gas",[]),s(t,"remnant",""),s(t,"freight",""),s(t,"userOrderCount",""),s(t,"num",1),s(t,"pail_num",1),s(t,"paylist",[]),s(t,"paytype",""),s(t,"gasName",""),s(t,"gasPrice",""),s(t,"wa_coin_config",0),t},methods:{radioChange:function(t){this.paytype=t.detail.value},getUserInfo:function(){var e=this,i={};(0,n.getUserInfo)(i).then((function(i){e.wa_coin=i.data.wa_coin,e.remnant=i.data.remnant,1==t.getStorageSync("user_type")?e.remnant>=15&&(e.pull=!0):e.remnant>=20&&(e.pull=!0),e.pail_num=i.data.pail_num}))},add:function(){this.pail_num>this.num&&this.num++},sub:function(){this.num>1&&this.num--},yuqi:function(){1==t.getStorageSync("user_type")?this.remnant>=15?(this.bodyBj=!this.bodyBj,this.check=!1,this.getOrderConfig()):t.showToast({title:"餘氣不足",icon:"none"}):this.remnant>=20?(this.bodyBj=!this.bodyBj,this.check=!1,this.getOrderConfig()):t.showToast({title:"餘氣不足",icon:"none"})},getOrderConfig:function(){var e=this;this.gas=[];var i={};this.user_type=t.getStorageSync("user_type"),(0,n.getOrderConfig)(i).then((function(t){e.bodyBj&&(e.freight=t.data.remnant_freight),e.check&&(e.freight=t.data.freight),e.userOrderCount=t.data.userOrderCount,1==e.user_type?e.gas.push(t.data.gas_one):2==e.user_type&&(e.gas.push(t.data.gas_one),e.gas.push(t.data.gas_two)),e.gasName=e.gas[e.index2].name,e.gasPrice=e.gas[e.index2].price,e.paylist=t.data.gtpay_type,e.wa_coin_config=t.data.wa_coin_config}))},getDefaultAddress:function(){var t=this,e={};(0,n.getDefaultAddress)(e).then((function(e){e.data&&(t.address=e.data.address,t.city=e.data.city,t.name=e.data.name,t.telephone=e.data.telephone,t.country=e.data.country,t.address_id=e.data.id)}))},checkbox:function(t){this.keep_address=t.detail.value[0]?t.detail.value[0]:0},changePay:function(t){this.payindex=t.target.value},changeCountry:function(t){console.log(t.target.value),this.country="",this.index1=t.target.value,this.country_id=this.itemslist[t.target.value].id},changeCity:function(t){this.city="",this.index=t.target.value,this.itemslist=this.arealist[this.index].items,this.city_id=this.arealist[this.index].id,this.index1=0,this.country_id=this.itemslist[this.index1].id},changeGas:function(t){this.index2=t.target.value,this.gasName=this.gas[this.index2].name,this.gasPrice=this.gas[this.index2].price},getAreaList:function(){var t=this,e=this,i={};(0,n.areaList)(i).then((function(i){if(t.arealist=i.data,t.itemslist=t.arealist[t.index].items,t.city_id=t.arealist[t.index].id,t.country_id=t.itemslist[t.index1].id,t.address_id){var s={address_id:t.address_id};(0,n.addressAddInfo)(s).then((function(i){t.city_id=i.data.city_id,t.country_id=i.data.country_id,t.arealist.forEach((function(t){t.id==e.city_id&&(e.index=e.arealist.indexOf(t))})),t.itemslist=t.arealist[t.index].items,t.itemslist.forEach((function(t){t.id==e.country_id&&(e.index1=e.itemslist.indexOf(t))})),t.address=i.data.address,t.name=i.data.name,t.telephone=i.data.telephone}))}}))},checkend:function(){1==t.getStorageSync("user_type")?this.wa_coin>=600?(this.check=!this.check,this.getOrderConfig()):t.showToast({title:"瓦幣不足",icon:"none"}):this.wa_coin>=800?(this.check=!this.check,this.getOrderConfig()):t.showToast({title:"瓦幣不足",icon:"none"})},goto:function(e,i){1==i?t.showToast({title:"暫未開發",icon:"none"}):t.redirectTo({url:e})},subOrder:function(){if(!this.name)return t.showToast({title:"請輸入姓名",icon:"none"});var e=/^(09\d{8})$/;if(!e.test(this.telephone))return t.showToast({title:"請輸入正確電話號碼",icon:"none"});if(!this.address)return t.showToast({title:"請輸入收貨地址",icon:"none"});if(!this.data&&2==this.active&&!this.time)return t.showToast({title:"請選擇預約時間",icon:"none"});if(!this.paytype)return t.showToast({title:"請選擇支付方式",icon:"none"});var i=this.city?this.city:this.arealist[this.index].name,n=this.country?this.country:this.itemslist[this.index1].name,s=i+n+this.address,a=this.check?1:0,r=this.bodyBj?1:0,o={gtpay_type:this.paytype,freight:this.freight,gas:this.gas[this.index2],allAddress:s,address_id:this.address_id,order_type:this.active,name:this.name,telephone:this.telephone,address:this.address,message:this.message,invoice_phone:this.invoice_phone,customer_name:this.customer_name,voucher_phone:this.voucher_phone,voucher_user:this.voucher_user,wa_coin:a,remnant:r,city_id:this.city_id,country_id:this.country_id,pre_date:this.date,pre_hour:this.time,token:"8a6166bc9a13b3616c36125a806660ae",keep_address:this.keep_address,pail_num:this.num};t.navigateTo({url:"/pages/distribution/Information?data="+encodeURIComponent(JSON.stringify(o))})},changetab:function(e){if(1==e){if(0==this.userOrderCount)return t.showToast({title:"新用戶首單必須是預約單！",icon:"none"});var i=new Date;if(i.getHours()<=8||i.getHours()>=21)return t.showToast({title:"即時單配送時間為08：00~21：00~若已過營業時間，請改預約明日下單，謝謝",icon:"none"});this.active=e}else this.active=e}}};e.default=r}).call(this,i(1)["default"])},79:function(t,e,i){"use strict";i.r(e);var n=i(80),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=s.a},80:function(t,e,i){}},[[73,"common/runtime","common/vendor"]]]);
>>>>>>> master
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/distribution/distribution.js.map